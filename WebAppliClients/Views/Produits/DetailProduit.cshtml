
@using ModelsCommun

@model ProduitViewModel

<div class="container mt-5">
    <h3 class="text-primary" color="black">Détails du Produit</h3>
    <hr>

    <div class="row">
        <div class="col-md-6">
            <dl class="row">
                <dt class="col-sm-4">Nom</dt>
                <dd class="col-sm-8 font-weight-bold">@Model.Produit.Nom</dd>

                <dt class="col-sm-4">Prix</dt>
                <dd class="col-sm-8 font-weight-bold text-success">@Model.Produit.Prix €</dd>

                <dt class="col-sm-4">Quantité Disponible</dt>
                <dd class="col-sm-8 font-weight-bold">@Model.Produit.QuantiteDisponible</dd>
            </dl>
        </div>
        <div class="col-md-6">
            <form id="addToCartForm" method="post" asp-controller="ProduitsVendus" asp-action="AddProduitPanier">
                <fieldset>
                    @* <legend class="text-primary">Ajouter au Panier</legend> *@

                    <input type="hidden" name="venteId" value="@Model.IdVente" />
                    <input type="hidden" name="produitId" value="@Model.Produit.ID" />

                    <div class="form-group">
                        <label for="quantity">Quantité:</label>
                        <input type="number" id="quantity" name="quantity" min="1" max="@Model.Produit.QuantiteDisponible" value="1" class="form-control" onchange="updateHiddenQuantity()">
                    </div>

                    <button type="button" class="btn btn-primary btn-lg btn-block" onclick="addToCart()">Ajouter au Panier</button>
                </fieldset>
            </form>
        </div>
    </div>
</div>

<script>
    function updateHiddenQuantity() {
        var quantity = document.getElementById('quantity').value;
        document.getElementById('quantityHidden').value = quantity;
    }

    function addToCart() {
        // Ajoutez ici une logique supplémentaire si nécessaire avant de soumettre le formulaire
        document.getElementById('addToCartForm').submit();
    }
</script>
