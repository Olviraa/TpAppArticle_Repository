@* @using WebAppliClients.Models.ViewModel

<script>
    function ajouterAuPanier() {
        var productId = @Html.Raw(Json.Serialize(Model.ID));
        var productName = '@Html.Raw(Json.Serialize(Model.Nom))';
        var productPrice = @Html.Raw(Json.Serialize(Model.Prix));
        var maxQuantity = @Html.Raw(Json.Serialize(Model.QuantiteDisponible));
        var selectedQuantity = document.getElementById('quantity').value;

        // Vérifiez si la quantité sélectionnée est valide
        if (selectedQuantity <= 0 || selectedQuantity > maxQuantity) {
            alert('Quantité non valide. Veuillez sélectionner une quantité entre 1 et ' + maxQuantity + '.');
            return;
        }

        // Ajouter le produit dans le panier
        var cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];

        var newItem = {
            id: productId,
            name: productName,
            price: productPrice,
            quantity: selectedQuantity
        };

        cartItems.push(newItem);
        localStorage.setItem('cartItems', JSON.stringify(cartItems));

        // Redirigez vers la liste des produits après avoir ajouté le produit au panier
        window.location.href = '/list';
    }
    }
</script> *@